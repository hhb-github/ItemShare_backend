个人物品分享系统 - 序列图文档
====================================

用户注册登录流程
===============

用户        React前端       Redux状态       API客户端        后端控制器       业务服务        数据仓库        MySQL数据库
====       ==========       ==========      ===========      ===========      ==========     ===========     ============

|               |               |               |               |               |               |
| 1. 用户点击    |               |               |               |               |               |
|    注册/登录  |               |               |               |               |               |
|    按钮       |               |               |               |               |               |
+-------------->|               |               |               |               |               |
|               |               |               |               |               |               |
|               | 2. 表单验证    |               |               |               |               |
|               |   - 输入检查   |               |               |               |               |
|               |   - 客户端     |               |               |               |               |
|               |     验证       |               |               |               |               |
|               |               |               |               |               |               |
|               | 3. 调用服务    |               |               |               |               |
|               |   userService |               |               |               |               |
|               |   .login()    |               |               |               |               |
|               +-------------->|               |               |               |               |
|               |               |               |               |               |               |
|               |               | 4. 更新loading|               |               |               |
|               |               |   状态         |               |               |               |
|               |               |               |               |               |               |
|               |               | 5. HTTP POST  |               |               |               |
|               |               |   /auth/login |               |               |               |
|               |               |   或 /users/  |               |               |               |
|               |               |   register    |               |               |               |
|               |               +-------------------------->|               |               |
|               |               |               |               |               |               |
|               |               |               | 6. 控制器处理  |               |               |
|               |               |               |   UserController|              |               |
|               |               |               |   .login()/.   |               |               |
|               |               |               |   register()   |               |               |
|               |               |               |               |               |               |
|               |               |               | 7. 业务逻辑    |               |               |
|               |               |               |   - 参数验证   |               |               |
|               |               |               |   - 密码加密   |               |               |
|               |               |               |   - JWT生成    |               |               |
|               |               |               +-------------->|               |               |
|               |               |               |               |               |               |
|               |               |               |               | 8. 数据操作   |               |
|               |               |               |               |   - 查询用户  |               |
|               |               |               |               |   - 验证密码  |               |
|               |               |               |               |   - 保存用户  |               |
|               |               |               |               +-------------------------->| 
|               |               |               |               |               |               |
|               |               |               |               |               | 9. SQL操作   |
|               |               |               |               |               |   SELECT/    |
|               |               |               |               |               |   INSERT/    |
|               |               |               |               |               |   UPDATE     |
|               |               |               |               |               +-------->|
|               |               |               |               |               |               |
|               |               |               |               |               |10. 返回结果  |
|               |               |               |               |               |<--------|
|               |               |               |               |               |               |
|               |               |               |               |11. 返回响应   |               |
|               |               |               |               |   { success,  |               |
|               |               |               |               |    token,     |               |
|               |               |               |               |    user }    |               |
|               |               |               |               +-------------------------->|
|               |               |               |               |               |               |
|               |               |               |12. 响应处理    |               |               |
|               |               |               |   - 解析token  |               |               |
|               |               |               |   - 更新状态   |               |               |
|               |               |               |   - 存储令牌   |               |               |
|               |               |               +-------------->|               |               |
|               |               |               |               |               |               |
|               |               |13. 登录成功   |               |               |               |
|               |               |   - 状态更新   |               |               |               |
|               |               +-------------->|               |               |               |
|               |               |               |               |               |               |
|               |14. 页面跳转   |               |               |               |               |
|               |   - 路由跳转  |               |               |               |               |
|               |   - 组件渲染  |               |               |               |               |
|<--------------+               |               |               |               |               |
|               |               |               |               |               |               |

物品发布流程
===========

用户        React前端       Redux状态       API客户端        后端控制器       业务服务        数据仓库        MySQL数据库
====       ==========       ==========      ===========      ===========      ==========     ===========     ============

|               |               |               |               |               |               |
| 1. 用户点击    |               |               |               |               |               |
|    "发布物品"  |               |               |               |               |               |
|    按钮        |               |               |               |               |               |
+-------------->|               |               |               |               |               |
|               |               |               |               |               |               |
|               | 2. 打开发布页  |               |               |               |               |
|               |   - 表单初始化 |               |               |               |               |
|               |   - 文件上传   |               |               |               |               |
|               |     组件加载   |               |               |               |               |
|               |               |               |               |               |               |
| 3. 用户填写    |               |               |               |               |               |
|    物品信息    |               |               |               |               |               |
|    - 标题      |               |               |               |               |               |
|    - 描述      |               |               |               |               |               |
|    - 分类      |               |               |               |               |               |
|    - 图片      |               |               |               |               |               |
+-------------->|               |               |               |               |               |
|               |               |               |               |               |               |
|               | 4. 表单验证    |               |               |               |               |
|               |   - 输入检查   |               |               |               |               |
|               |   - 图片验证   |               |               |               |               |
|               |               |               |               |               |               |
|               | 5. 调用物品服务|               |               |               |               |
|               |   itemService |               |               |               |               |
|               |   .createItem |               |               |               |               |
|               +-------------->|               |               |               |               |
|               |               |               |               |               |               |
|               |               | 6. HTTP POST  |               |               |               |
|               |               |   /items      |               |               |               |
|               |               |   { title,    |               |               |               |
|               |               |    desc,      |               |               |               |
|               |               |    images[] } |               |               |               |
|               |               +-------------------------->|               |               |
|               |               |               |               |               |               |
|               |               |               | 7. 物品控制器  |               |               |
|               |               |               |   ItemController|              |               |
|               |               |               |   .createItem()|              |               |
|               |               |               |               |               |               |
|               |               |               | 8. 业务处理    |               |               |
|               |               |               |   - 参数验证   |               |               |
|               |               |               |   - 用户权限   |               |               |
|               |               |               |   - 图片处理   |               |               |
|               |               |               +-------------->|               |               |
|               |               |               |               |               |               |
|               |               |               |               | 9. 保存物品    |               |
|               |               |               |               |   - 创建Item  |               |
|               |               |               |               |   - 保存图片  |               |
|               |               |               |               |   - 关联数据  |               |
|               |               |               |               +-------------------------->|
|               |               |               |               |               |               |
|               |               |               |               |               |10. 数据持久化 |
|               |               |               |               |               |   INSERT Item|
|               |               |               |               |               |   INSERT Image|
|               |               |               |               |               +-------->|
|               |               |               |               |               |               |
|               |               |               |               |               |11. 返回ID    |
|               |               |               |               |               |<--------|
|               |               |               |               |               |               |
|               |               |               |               |12. 返回成功   |               |
|               |               |               |               |   { success,  |               |
|               |               |               |               |    item }    |               |
|               |               |               |               +-------------------------->|
|               |               |               |               |               |               |
|               |               |               |13. 响应处理    |               |               |
|               |               |               |   - 更新状态   |               |               |
|               |               |               |   - 页面跳转   |               |               |
|               |               |               +-------------->|               |               |
|               |               |               |               |               |               |
|               |               |14. 发布成功   |               |               |               |
|               |               |   - 状态更新   |               |               |               |
|               |               +-------------->|               |               |               |
|               |               |               |               |               |               |
|               |15. 跳转首页   |               |               |               |               |
|               |   - 显示物品  |               |               |               |               |
|               |   - 更新列表  |               |               |               |               |
|<--------------+               |               |               |               |               |
|               |               |               |               |               |               |

物品搜索流程
===========

用户        React前端       Redux状态       API客户端        后端控制器       业务服务        数据仓库        MySQL数据库
====       ==========       ==========      ===========      ===========      ==========     ===========     ============

|               |               |               |               |               |               |
| 1. 用户输入    |               |               |               |               |               |
|    搜索关键词  |               |               |               |               |               |
|    或筛选条件  |               |               |               |               |               |
+-------------->|               |               |               |               |               |
|               |               |               |               |               |               |
|               | 2. 搜索触发    |               |               |               |               |
|               |   - 防抖处理   |               |               |               |               |
|               |   - 参数构造   |               |               |               |               |
|               |               |               |               |               |               |
|               | 3. 调用搜索服务|               |               |               |               |
|               |   itemService |               |               |               |               |
|               |   .searchItems|               |               |               |               |
|               +-------------->|               |               |               |               |
|               |               |               |               |               |               |
|               |               | 4. HTTP GET   |               |               |               |
|               |               |   /items      |               |               |               |
|               |               |   ?search=    |               |               |               |
|               |               |   keyword&    |               |               |               |
|               |               |   category=   |               |               |               |
|               |               |   filter      |               |               |               |
|               |               +-------------------------->|               |               |
|               |               |               |               |               |               |
|               |               |               | 5. 物品控制器  |               |               |
|               |               |               |   ItemController|              |               |
|               |               |               |   .getItems()  |               |               |
|               |               |               |               |               |               |
|               |               |               | 6. 搜索处理    |               |               |
|               |               |               |   - 参数解析   |               |               |
|               |               |               |   - 查询条件   |               |               |
|               |               |               |   - 分页处理   |               |               |
|               |               |               +-------------->|               |               |
|               |               |               |               |               |               |
|               |               |               |               | 7. 数据查询   |               |
|               |               |               |               |   - 条件搜索  |               |               |
|               |               |               |               |   - 排序处理  |               |               |
|               |               |               |               |   - 分页查询  |               |               |
|               |               |               |               +-------------------------->|
|               |               |               |               |               |               |
|               |               |               |               |               | 8. SQL查询   |
|               |               |               |               |               |   SELECT ... |
|               |               |               |               |               |   WHERE ...  |
|               |               |               |               |               |   ORDER BY   |
|               |               |               |               |               +-------->|
|               |               |               |               |               |               |
|               |               |               |               |               | 9. 返回结果集|
|               |               |               |               |               |<--------|
|               |               |               |               |               |               |
|               |               |               |               |10. 响应数据   |               |
|               |               |               |               |   { items[],  |               |
|               |               |               |               |    total,     |               |
|               |               |               |               |    pageInfo } |               |
|               |               |               |               +-------------------------->|
|               |               |               |               |               |               |
|               |               |               |11. 更新搜索结果|               |               |
|               |               |               |   - 解析数据   |               |               |
|               |               |               |   - 更新状态   |               |               |
|               |               |               +-------------->|               |               |
|               |               |               |               |               |               |
|               |               |12. 渲染结果   |               |               |               |
|               |               |   - 更新UI    |               |               |               |
|               |               |   - 显示列表  |               |               |               |
|               |               +-------------->|               |               |               |
|               |               |               |               |               |               |
|               |13. 显示搜索   |               |               |               |               |
|               |   - 物品卡片  |               |               |               |               |
|               |   - 分页控件  |               |               |               |               |
|               |   - 筛选器    |               |               |               |               |
|<--------------+               |               |               |               |               |
|               |               |               |               |               |               |

消息发送流程
===========

用户        React前端       Redux状态       API客户端        后端控制器       业务服务        数据仓库        MySQL数据库
====       ==========       ==========      ===========      ===========      ==========     ===========     ============

|               |               |               |               |               |               |
| 1. 用户点击    |               |               |               |               |               |
|    发送消息    |               |               |               |               |               |
|    按钮        |               |               |               |               |               |
+-------------->|               |               |               |               |               |
|               |               |               |               |               |               |
|               | 2. 消息验证    |               |               |               |               |
|               |   - 内容检查   |               |               |               |               |
|               |   - 权限验证   |               |               |               |               |
|               |               |               |               |               |               |
|               | 3. 调用消息服务|               |               |               |               |
|               |   messageService|              |               |               |               |
|               |   .sendMessage |               |               |               |               |
|               +-------------->|               |               |               |               |
|               |               |               |               |               |               |
|               |               | 4. HTTP POST  |               |               |               |
|               |               |   /messages   |               |               |               |
|               |               |   { receiverId,|               |               |               |
|               |               |    content }  |               |               |               |
|               |               +-------------------------->|               |               |
|               |               |               |               |               |               |
|               |               |               | 5. 消息控制器  |               |               |
|               |               |               |   MessageController|              |               |
|               |               |               |   .createMessage()|              |               |
|               |               |               |               |               |               |
|               |               |               | 6. 业务处理    |               |               |
|               |               |               |   - 参数验证   |               |               |
|               |               |               |   - 权限检查   |               |               |
|               |               |               |   - 保存消息   |               |               |
|               |               |               +-------------->|               |               |
|               |               |               |               |               |               |
|               |               |               |               | 7. 持久化消息  |               |
|               |               |               |               |   - 创建消息  |               |               |
|               |               |               |               |   - 关联用户  |               |               |
|               |               |               |               |   - 设置状态  |               |               |
|               |               |               |               +-------------------------->|
|               |               |               |               |               |               |
|               |               |               |               |               | 8. 数据插入   |
|               |               |               |               |               |   INSERT INTO |
|               |               |               |               |               |   messages    |
|               |               |               |               |               +-------->|
|               |               |               |               |               |               |
|               |               |               |               |               | 9. 确认插入   |
|               |               |               |               |               |<--------|
|               |               |               |               |               |               |
|               |               |               |               |10. 发送响应   |               |
|               |               |               |               |   { success,  |               |
|               |               |               |               |    message }  |               |
|               |               |               |               +-------------------------->|
|               |               |               |               |               |               |
|               |               |               |11. 更新状态    |               |               |
|               |               |               |   - 本地消息   |               |               |
|               |               |               |   - 聊天列表   |               |               |
|               |               |               +-------------->|               |               |
|               |               |               |               |               |               |
|               |               |12. 消息发送   |               |               |               |
|               |               |   - UI更新    |               |               |               |
|               |               |   - 实时显示  |               |               |               |
|               |               +-------------->|               |               |               |
|               |               |               |               |               |               |
|               |13. 显示消息   |               |               |               |               |
|               |   - 消息气泡  |               |               |               |               |
|               |   - 发送状态  |               |               |               |               |
|               |   - 时间戳    |               |               |               |               |
|<--------------+               |               |               |               |               |
|               |               |               |               |               |               |

收藏物品流程
===========

用户        React前端       Redux状态       API客户端        后端控制器       业务服务        数据仓库        MySQL数据库
====       ==========       ==========      ===========      ===========      ==========     ===========     ============

|               |               |               |               |               |               |
| 1. 用户点击    |               |               |               |               |               |
|    收藏按钮    |               |               |               |               |               |
+-------------->|               |               |               |               |               |
|               |               |               |               |               |               |
|               | 2. 状态检查    |               |               |               |               |
|               |   - 是否已收藏 |               |               |               |               |
|               |   - 权限验证   |               |               |               |               |
|               |               |               |               |               |               |
|               | 3. 调用收藏服务|               |               |               |               |
|               |   favoriteService|             |               |               |               |
|               |   .toggleFavorite|             |               |               |               |
|               +-------------->|               |               |               |               |
|               |               |               |               |               |               |
|               |               | 4. HTTP POST  |               |               |               |
|               |               |   /favorites  |               |               |               |
|               |               |   { itemId }  |               |               |               |
|               |               +-------------------------->|               |               |
|               |               |               |               |               |               |
|               |               |               | 5. 收藏控制器  |               |               |
|               |               |               |   FavoriteController|              |               |
|               |               |               |   .toggleFavorite()|              |               |
|               |               |               |               |               |               |
|               |               |               | 6. 业务处理    |               |               |
|               |               |               |   - 检查状态   |               |               |
|               |               |               |   - 切换收藏   |               |               |
|               |               |               |   - 更新计数   |               |               |
|               |               |               +-------------->|               |               |
|               |               |               |               |               |               |
|               |               |               |               | 7. 数据操作   |               |
|               |               |               |               |   - 检查收藏  |               |
|               |               |               |               |   - 插入/删除 |               |
|               |               |               |               |   - 更新状态  |               |
|               |               |               |               +-------------------------->|
|               |               |               |               |               |               |
|               |               |               |               |               | 8. SQL操作    |
|               |               |               |               |               |   INSERT/    |
|               |               |               |               |               |   DELETE     |
|               |               |               |               |               |   favorites  |
|               |               |               |               |               +-------->|
|               |               |               |               |               |               |
|               |               |               |               |               | 9. 返回结果   |
|               |               |               |               |               |<--------|
|               |               |               |               |               |               |
|               |               |               |               |10. 响应状态   |               |
|               |               |               |               |   { success,  |               |
|               |               |               |               |    favorited }|               |
|               |               |               |               +-------------------------->|
|               |               |               |               |               |               |
|               |               |               |11. 更新收藏状态|               |               |
|               |               |               |   - 本地状态   |               |               |
|               |               |               |   - UI更新     |               |               |
|               |               |               +-------------->|               |               |
|               |               |               |               |               |               |
|               |               |12. UI反馈     |               |               |               |
|               |               |   - 按钮状态  |               |               |               |
|               |               |   - 动画效果  |               |               |               |
|               |               +-------------->|               |               |               |
|               |               |               |               |               |               |
|               |13. 显示收藏   |               |               |               |               |
|               |   - 按钮切换  |               |               |               |               |
|               |   - 收藏计数  |               |               |               |               |
|               |   - 视觉反馈  |               |               |               |               |
|<--------------+               |               |               |               |               |
|               |               |               |               |               |               |

部署架构流程（Docker + Zeabur）
=============================

开发者      Docker构建     Docker镜像      Nginx配置      容器运行时      Zeabur平台      数据库服务
=======    ============   ============    ============   ============    ==========    ============

|               |               |               |               |               |               |
| 1. 代码提交    |               |               |               |               |               |
|   Git Push    |               |               |               |               |               |
+-------------->|               |               |               |               |               |
|               |               |               |               |               |               |
|               | 2. Docker构建  |               |               |               |               |
|               |   docker build|               |               |               |               |
|               |   - 前端构建   |               |               |               |               |
|               |   - 后端构建   |               |               |               |               |
|               |               |               |               |               |               |
|               | 3. 镜像推送    |               |               |               |               |
|               |   docker push |               |               |               |               |
|               |               | 4. 镜像存储    |               |               |               |
|               |               |   - 前端镜像   |               |               |               |
|               |               |   - 后端镜像   |               |               |               |
|               |               +-------------------------->|               |               |
|               |               |               |               |               |               |
|               |               |               | 5. Nginx配置  |               |               |
|               |               |               |   - 反向代理   |               |               |
|               |               |               |   - 静态文件  |               |               |
|               |               |               |   - 环境变量  |               |               |
|               |               |               |               |               |               |
|               |               |               |               | 6. 容器启动   |               |
|               |               |               |               |   - 拉取镜像  |               |               |
|               |               |               |               |   - 配置环境  |               |               |
|               |               |               |               |   - 端口映射  |               |               |
|               |               |               |               |               |               |
|               |               |               |               |               | 7. 数据库连接 |
|               |               |               |               |               |   - MySQL服务 |
|               |               |               |               |               |   - 初始化   |
|               |               |               |               |               |   - 数据迁移 |
|               |               |               |               |               +-------->|
|               |               |               |               |               |               |
|               |               |               |               | 8. 应用就绪  |               |
|               |               |               |               |   - 健康检查  |               |               |
|               |               |               |               |   - 负载均衡  |               |               |
|               |               |               |               |               |               |
|               |               |               |               |               | 9. 外部访问  |
|               |               |               |               |               |   - HTTPS    |
|               |               |               |               |               |   - 域名解析 |
|               |               |               |               |               +-------->|
|               |               |               |               |               |               |
|               |               |               |               |10. 返回URL   |               |
|               |               |               |               |   - 前端地址  |               |               |
|               |               |               |               |   - API地址   |               |               |
|               |               |               |               +-------------------------->|
|               |               |               |               |               |               |
|               |               |               |11. 部署完成   |               |               |
|               |               |               |   - 服务状态  |               |               |
|               |               |               |   - 监控信息  |               |               |
|               |               |               +-------------------------->|               |
|               |               |               |               |               |               |
|               |               |12. 构建完成   |               |               |               |
|               |               |   - 镜像标签  |               |               |               |
|               |               |   - 部署URL   |               |               |               |
|               +-------------->|               |               |               |               |
|               |               |               |               |               |               |
| 13. 访问应用   |               |               |               |               |               |
|   用户浏览器   |               |               |               |               |               |
+-------------->|               |               |               |               |               |
|               |               |               |               |               |               |